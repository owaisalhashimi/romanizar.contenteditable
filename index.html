<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<mata name="viewport" content="width=device-width,initial-scale=1">
	<link rel="stylesheet" href="bower_components/normalize-css/normalize.css">
	<link rel="stylesheet" href="css/romanizar.css">
	<title>RomanizAr in contenteditable HTML</title>
</head>
<body>
	<main>
		<h1>Live Arabic Transliteration in <code>contenteditable</code> elements</h1>
		<button data-action="toggleModal"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0" y="0" width="20" height="20" viewBox="0, 0, 100, 100">
  <g id="Layer_1" transform="translate(0, 0)">
    <g>
      <path d="M0,0 L100,0 L100,20 L0,20 L0,0 z" fill="#333333"/>
      <path d="M0,40 L100,40 L100,60 L0,60 L0,40 z" fill="#333333"/>
      <path d="M0,80 L100,80 L100,100 L0,100 L0,80 z" fill="#333333"/>
    </g>
  </g>
</svg></button>
		<div id="editor-1" contenteditable="true">This is a contenteditable div</div>
		<div id="usage">
			<table>
				<tr>
					<th>Macro</th>
					<th>Inserts</th>
					<th>Represents</th>
				</tr>
			</table>
		</div>
	</main>
	<script src="romanizar.js"></script>
	<script>
	document.addEventListener('DOMContentLoaded',function(){
		var r = new RomanizAr(document.querySelector('#editor-1'));
		var modal = document.querySelector('#usage');
		var table = modal.querySelector('table');
		var button = document.querySelector('[data-action]');
		var macros = [
		  {key:'/AA/',value:'\u0100',arabic:'ا'},
		  {key:'/aa/',value:'\u0101',arabic:'ا'},
		  {key:'/EE/',value:'\u012A',arabic:'ي'},
		  {key:'/ee/',value:'\u012B',arabic:'ي'},
		  {key:'/OO/',value:'\u016A',arabic:'و'},
		  {key:'/oo/',value:'\u016B',arabic:'و'},
		  {key:'/DD/',value:'\u1E0C',arabic:'ض'},
		  {key:'/dd/',value:'\u1E0D',arabic:'ض'},
		  {key:'/HH/',value:'\u1E24',arabic:'ح'},
		  {key:'/hh/',value:'\u1E25',arabic:'ح'},
		  {key:'/SS/',value:'\u1E62',arabic:'ص'},
		  {key:'/ss/',value:'\u1E63',arabic:'ص'},
		  {key:'/TT/',value:'\u1E6C',arabic:'ط'},
		  {key:'/tt/',value:'\u1E6D',arabic:'ط'},
		  {key:'/ZZ/',value:'\u1E92',arabic:'ظ'},
		  {key:'/zz/',value:'\u1E93',arabic:'ظ'},
		  {key:'/cc/',value:'\u02BF',arabic:'ع'},
		  {key:'/,,/',value:'\u02BE',arabic:'ء'}
		];
		macros.forEach(function(macro,i){
			var tr = document.createElement('tr');
			var tdk = document.createElement('td');
			var tdv = document.createElement('td');
			var tda = document.createElement('td');
			var kb = document.createElement('kbd');
			var k = document.createTextNode(macro.key);
			var v = document.createTextNode(macro.value);
			var a = document.createTextNode(macro.arabic);
			kb.appendChild(k)
			tdk.appendChild(kb);
			tdv.appendChild(v);
			tda.appendChild(a);
			tr.appendChild(tdk);
			tr.appendChild(tdv);
			tr.appendChild(tda);
			table.appendChild(tr);
		});
		button.onclick=toggleModal;
		document.body.onkeyup=function(e){
			if(e.keyCode===27) {
				hideModal();
			};
		};
		function hideModal(e) {
			document.body.classList.remove('show-usage');
		};
		function toggleModal(e) {
			e.preventDefault();
			document.body.classList.toggle('show-usage');
		};
	});
	</script>
</body>
</html>