/*
 * Live Arabic transliteration in contenteditable HTML elements.
 * @author: Owais Al-Hashimi
 * @param {HTMLElement} node HTML element with attribute "contenteditable"="true".
 * @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&dn=gpl-2.0.txt GPLv2.0
 */
function RomanizAr(e){"use strict";var t=new Worker("/worker.js"),n=this,a=/\/[A-Z,]+\//gi,o={"/AA/":"Ā","/aa/":"ā","/EE/":"Ī","/ee/":"ī","/OO/":"Ū","/oo/":"ū","/DD/":"Ḍ","/dd/":"ḍ","/HH/":"Ḥ","/hh/":"ḥ","/SS/":"Ṣ","/ss/":"ṣ","/TT/":"Ṭ","/tt/":"ṭ","/ZZ/":"Ẓ","/zz/":"ẓ","/cc/":"ʿ","/,,/":"ʾ"};return RomanizAr.prototype.macros=o,n.extend=function(e){e.forEach(function(e){var t=e.text.match(a);t.forEach(function(t){e.text=e.text.replace(t,n.macros[t])}),n.macros[e.pattern]=e.text})},n.element=e,n.element.addEventListener("keyup",function(e){var n=e.target.textContent;t.postMessage({test:a,subject:n})}),t.onmessage=function(e){if(e.data.key&&e.data.key in n.macros){var t=window.getSelection(),a=document.createRange(),o=t.focusNode,r=t.focusOffset,c=document.createTextNode(n.macros[e.data.key]);a.setStart(o,r-e.data.key.length),a.setEnd(o,r),a.deleteContents(),a.insertNode(c),t.addRange(a),t.containsNode(c,!1)||t.extend(c,c.length),t.collapseToEnd()}},{element:n.element,extend:n.extend}}
/*
 * @license-end
 */